# Event Model

### Overview

[event reception API,](278_Event_Reception.html)It consists of external events defined in Personium and internal events defined within Personium

![Event Model](image/eventmodel.png "Event Model")

#### External Events

[event reception API,](278_Event_Reception.html)Represents an event to be accepted.  
An event is generated by the event reception API, and processing is executed according to the contents of the accepted event  
In addition, the future, relay processing of events accepted by the message notification to other cells is possible.  
In the event reception desk, I want to output as an event log the contents of the event that occurred.

#### Internal Event

This indicates that the process to be executed based on the state management data held in the interior of the Personium (OData/WebDAV/Service, etc.).  
Internal events as a representative, a request of Personium API.  
I want to output as an event log the results in the response return when the Personium API.

### Event Log

#### Event log management settings

Log configuration update API output setting for the event log can by  
If you want to get the information set, log setting acquisition API to use.

#### Event log access method

To be managed by WebDAV on, the event log, perform the API for WebDAV access to the event log file.

* [Log File Acquire List](284_Retrieve_Log_File_list.html)
* [Log File Acquire](285_Retrieve_Log_File.html)
* [Delete Log File](286_Delete_Log_File.html)

#### Event log retention period

Since the size of the event log file is increased in response to an event amount, to rotate the event log file at a constant amount.  
Hold the number of generations of the event log file is rotated, the 12 largest generation.  
It should be noted that, as the default 50MB, maximum size of the rotating at the time, set the log update API and can be set at.

#### Example

##### External event output

```
2013-04-18 14:52:39.778 [thread-pool-1-38888(20)] [ERROR] EventLogger Req_animal-access_1001,client,https://{UnitFQDN}/appCell/,https://{UnitFQDN}/servicemanager/#admin,actionData,/svc/token_keeper,resultData
2013-04-18 14:52:40.688 [thread-pool-1-38888(17)] [INFO ] EventLogger Req_animal-access_2001,client,https://{UnitFQDN}/appCell/,https://{UnitFQDN}/servicemanager/#admin,action,/svc/token_keeper,result
2013-04-18 15:01:46.994 [thread-pool-1-38888(25)] [INFO ] EventLogger Req_animal-access_2001,client,https://{UnitFQDN}/appCell/,https://{UnitFQDN}/servicemanager/#admin,action,/svc/token_keeper,result
2013-04-18 15:06:19.294 [thread-pool-1-38888(15)] [ERROR] EventLogger Req_animal-access_1001,client,https://{UnitFQDN}/appCell/,https://{UnitFQDN}/servicemanager/#admin,actionData,/svc/token_keeper,resultData
2013-04-18 15:06:23.360 [thread-pool-1-38888(17)] [INFO ] EventLogger Req_animal-access_2001,client,https://{UnitFQDN}/appCell/,https://{UnitFQDN}/servicemanager/#admin,action,/svc/token_keeper,result
2013-04-18 15:09:18.073 [thread-pool-1-38888(10)] [ERROR] EventLogger Req_animal-access_1001,client,https://{UnitFQDN}/appCell/,https://{UnitFQDN}/servicemanager/#admin,actionData,/svc/token_keeper,resultData
```

##### Internal event output

```
2013-04-18 14:52:39.778 [thread-pool-1-38888(20)] [ERROR] EventLogger Req_animal-access_1001,server,https://{UnitFQDN}/appCell/,https://{UnitFQDN}/appCell/#staff,POST,/homeClinic/__token,200
2013-04-18 14:52:39.778 [thread-pool-1-38888(20)] [ERROR] EventLogger Req_animal-access_1001,server,https://{UnitFQDN}/appCell/,https://{UnitFQDN}/appCell/#staff,PROPFIND,/homeClinic/box/col/put_blog,207
2013-04-18 14:52:39.779 [thread-pool-1-38888(20)] [ERROR] EventLogger Req_animal-access_1001,server,https://{UnitFQDN}/appCell/,https://{UnitFQDN}/appCell/#staff,PUT,/homeClinic/box/col/put_blog,204
2013-04-18 14:52:39.780 [thread-pool-1-38888(20)] [ERROR] EventLogger Req_animal-access_1001,server,https://{UnitFQDN}/appCell/,https://{UnitFQDN}/appCell/#staff,GET,/homeClinic/box/col/blog_20130418,200
```


###### Copyright 2017 FUJITSU LIMITED
